{@String title} {@String currentPage} {@String userName}
<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>{title??}</title>
        <link rel="icon" href="/favicon.ico" type="image/x-icon" />

        <!-- UIkit CSS -->
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/uikit@3.25.4/dist/css/uikit.min.css"
        />

        <!-- UIkit JS -->
        <script src="https://cdn.jsdelivr.net/npm/uikit@3.25.4/dist/js/uikit.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/uikit@3.25.4/dist/js/uikit-icons.min.js"></script>

        <!-- HTMX 2.0.8 -->
        <script
            src="https://cdn.jsdelivr.net/npm/htmx.org@2.0.8/dist/htmx.min.js"
            integrity="sha384-/TgkGk7p307TH7EXJDuUlgG3Ce1UVolAOFopFekQkkXihi5u/6OCvVKyz1W+idaz"
            crossorigin="anonymous"
        ></script>

        <link rel="stylesheet" href="/style.css" />
    </head>
    <body>
        <div class="uk-offcanvas-content">
            <!-- Mobile Header -->
            <div class="uk-navbar-container uk-hidden@l" uk-navbar>
                <div class="uk-navbar-left">
                    <a
                        class="uk-navbar-toggle"
                        uk-navbar-toggle-icon
                        href="#mobile-sidebar"
                        uk-toggle
                    ></a>
                    <span class="uk-navbar-item uk-logo">HX-Qute</span>
                </div>
            </div>

            <!-- Main Layout Container -->
            <div class="uk-grid-collapse" uk-grid>
                <!-- Sidebar (visible on large screens) -->
                <div class="uk-width-auto@l uk-visible@l sidebar-container">
                    <aside class="sidebar uk-height-viewport uk-flex uk-flex-column">
                        <!-- Logo -->
                        <div class="uk-padding-small">
                            <a
                                href="/"
                                class="uk-flex uk-flex-middle logo-link"
                            >
                                <img
                                    src="/img/logo-scaffold.png"
                                    width="40"
                                    height="40"
                                    alt="HX-Qute Logo"
                                />
                                <span
                                    class="uk-margin-small-left uk-text-bold uk-text-large"
                                    >HX-Qute</span
                                >
                            </a>
                        </div>

                        <!-- Navigation -->
                        {#include $navigation /}

                        <!-- Copyright -->
                        <div class="uk-padding-small uk-margin-auto-top uk-text-small">
                            Â©
                            <a href="https://archton.io" target="_blank">Archton.io</a>
                            <script>document.write(new Date().getFullYear())</script>
                        </div>
                    </aside>
                </div>

                <!-- Main Content -->
                <div class="uk-width-expand@l main-content-area">
                    <div class="uk-padding">
                        <div id="main-content" class="uk-container">
                            {#insert}Default content{/}
                        </div>
                    </div>
                </div>
            </div>

            <!-- Mobile Sidebar (Offcanvas) -->
            <div id="mobile-sidebar" uk-offcanvas="overlay: true">
                <div class="uk-offcanvas-bar sidebar">
                    <button
                        class="uk-offcanvas-close"
                        type="button"
                        uk-close
                    ></button>

                    <!-- Logo -->
                    <div class="uk-padding-small">
                        <a href="/" class="uk-flex uk-flex-middle logo-link">
                            <img
                                src="/img/logo-scaffold.png"
                                width="40"
                                height="40"
                                alt="HX-Qute Logo"
                            />
                            <span
                                class="uk-margin-small-left uk-text-bold uk-text-large"
                                >HX-Qute</span
                            >
                        </a>
                    </div>

                    <!-- Mobile Navigation -->
                    {#include $navigation /}
                </div>
            </div>

            <!-- Login Modal -->
            <div id="login-modal" uk-modal>
                <div class="uk-modal-dialog uk-modal-body">
                    <button class="uk-modal-close-default" type="button" uk-close></button>
                    <h2 class="uk-modal-title">Login</h2>

                    <div id="login-error"></div>

                    <form action="/j_security_check" method="POST" class="uk-form-stacked"
                          onsubmit="document.getElementById('j_username').value = document.getElementById('j_username').value.toLowerCase().trim();">
                        <div class="uk-margin">
                            <label class="uk-form-label" for="j_username">Email</label>
                            <input class="uk-input" type="email" id="j_username" name="j_username"
                                   placeholder="Enter email" required />
                        </div>

                        <div class="uk-margin">
                            <label class="uk-form-label" for="j_password">Password</label>
                            <input class="uk-input" type="password" id="j_password" name="j_password"
                                   placeholder="Enter password" required />
                        </div>

                        <div class="uk-margin">
                            <button type="submit" class="uk-button uk-button-primary">Login</button>
                        </div>
                    </form>

                    <p class="uk-text-small">
                        Don't have an account? <a href="/signup" class="uk-modal-close">Sign up</a>
                    </p>
                </div>
            </div>
        </div>

        <script>
            (function() {
                var params = new URLSearchParams(window.location.search);
                if (params.has('login')) {
                    UIkit.modal('#login-modal').show();
                    if (params.has('error')) {
                        document.getElementById('login-error').innerHTML =
                            '<div class="uk-alert uk-alert-danger" uk-alert>' +
                            '<a class="uk-alert-close" uk-close></a>' +
                            '<p>Invalid email or password.</p></div>';
                    }
                    history.replaceState(null, '', window.location.pathname);
                }
            })();
        </script>
    </body>
</html>

{#fragment id='navigation'}
<ul class="uk-nav uk-nav-default uk-padding-small" uk-nav>
    <li class="{#if currentPage?? == 'home'}uk-active{/if}">
        <a href="/">
            <span uk-icon="icon: home; ratio: 1.2"></span>
            <span class="uk-margin-small-left">Home</span>
        </a>
    </li>
    <li class="{#if currentPage?? == 'persons'}uk-active{/if}">
        <a href="/persons">
            <span uk-icon="icon: users; ratio: 1.2"></span>
            <span class="uk-margin-small-left">People</span>
        </a>
    </li>
    <li class="uk-parent {#if currentPage?? == 'gender' || currentPage?? == 'title' || currentPage?? == 'relationship'}uk-open{/if}">
        <a href="#">
            <span uk-icon="icon: settings; ratio: 1.2"></span>
            <span class="uk-margin-small-left">Maintenance</span>
        </a>
        <ul class="uk-nav-sub">
            <li class="{#if currentPage?? == 'gender'}uk-active{/if}">
                <a href="/genders">
                    <span uk-icon="icon: users; ratio: 1"></span>
                    <span class="uk-margin-small-left">Gender</span>
                </a>
            </li>
            <li class="{#if currentPage?? == 'title'}uk-active{/if}">
                <a href="/titles">
                    <span uk-icon="icon: bookmark; ratio: 1"></span>
                    <span class="uk-margin-small-left">Title</span>
                </a>
            </li>
            <li class="{#if currentPage?? == 'relationship'}uk-active{/if}">
                <a href="/relationships">
                    <span uk-icon="icon: link; ratio: 1"></span>
                    <span class="uk-margin-small-left">Relationship</span>
                </a>
            </li>
        </ul>
    </li>
    {#if userName}
    <li>
        <a href="/logout">
            <span uk-icon="icon: sign-out; ratio: 1.2"></span>
            <span class="uk-margin-small-left">Logout ({userName})</span>
        </a>
    </li>
    {#else}
    <li>
        <a href="#login-modal" uk-toggle>
            <span uk-icon="icon: sign-in; ratio: 1.2"></span>
            <span class="uk-margin-small-left">Login</span>
        </a>
    </li>
    {/if}
</ul>
{/fragment}
